<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Инженерный тренажер: Исходные данные</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;500;600;700&display=swap');

        :root {
            --bg-silk: #fdfaf5;
            --gold-accent: #bc932f;
            --gold-gradient: linear-gradient(135deg, #d4af37, #bc932f);
            --gold-border: #d4af37;
            --text-dark: #2c2c2c;
            --success: #2e7d32;
            --success-bg: #e8f5e9;
            --error: #d32f2f;
            --error-bg: #ffebee;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-silk);
            margin: 0; padding: 10px;
            display: flex; justify-content: center;
        }

        #ultra-wide-designer {
            background: #ffffff;
            border: 1px solid var(--gold-border);
            border-radius: 4px;
            padding: 20px 30px;
            width: 100%; max-width: 1600px;
            min-height: 550px;
            box-shadow: 0 40px 90px rgba(188, 147, 47, 0.15);
            display: flex; flex-direction: column;
            position: relative; box-sizing: border-box;
        }

        /* --- МАЛЕНЬКОЕ ВСплывающее ОКНО (ПОП-АП) --- */
        #modal-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(253, 250, 245, 0.7);
            backdrop-filter: blur(4px); /* Легкое размытие фона */
            z-index: 2000;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.4s ease;
        }

        .start-popup {
            background: white;
            border: 2px solid var(--gold-border);
            border-radius: 12px;
            padding: 35px;
            width: 450px; /* Компактный размер */
            text-align: center;
            box-shadow: 0 30px 60px rgba(188, 147, 47, 0.2);
            animation: popupEntrance 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popupEntrance {
            from { opacity: 0; transform: scale(0.8) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .start-btn {
            background: var(--gold-gradient); color: white;
            padding: 15px 40px; border: none; border-radius: 30px;
            font-size: 18px; font-weight: 700; text-transform: uppercase;
            cursor: pointer; box-shadow: 0 10px 20px rgba(188, 147, 47, 0.3);
            transition: 0.3s; margin-top: 20px;
        }
        .start-btn:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(188, 147, 47, 0.4); }

        #modal-overlay.hidden { opacity: 0; visibility: hidden; }

        /* --- ГРАФИКА И ЭФФЕКТЫ КАРТОЧЕК --- */
        @keyframes popIn {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid var(--bg-silk); padding-bottom: 10px; }
        h2 { font-family: 'Playfair Display', serif; color: var(--gold-accent); font-size: 28px; margin: 0; text-transform: uppercase; }
        
        .grid-workspace { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; flex: 1; position: relative; }

        .category-bucket {
            background: rgba(188, 147, 47, 0.01); border: 2px dashed var(--gold-border);
            border-radius: 8px; display: flex; flex-direction: column; align-items: center;
            padding: 15px; min-height: 380px; overflow-y: auto; transition: 0.3s;
        }
        .category-bucket.drag-over { background: rgba(188, 147, 47, 0.07); border-style: solid; }

        .header-group { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; pointer-events: none; }
        .header-group svg { width: 35px; height: 35px; fill: var(--gold-accent); }
        .header-group span { font-size: 20px; font-weight: 700; color: var(--gold-accent); }

        .overlay-anchor { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000; pointer-events: none; width: 0; height: 0; }

        .popping-card {
            width: 450px; min-height: 110px; background: #ffffff;
            border: 1px solid #ddd; border-left: 10px solid var(--gold-accent);
            border-radius: 8px; padding: 25px; font-size: 20px; font-weight: 600;
            text-align: center; box-shadow: 0 30px 60px rgba(0,0,0,0.15);
            cursor: grab; display: flex; align-items: center; justify-content: center;
            line-height: 1.3; pointer-events: auto; color: var(--text-dark);
            position: absolute; top: 50%; left: 50%;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        .accumulated-item {
            width: 95%; font-size: 16px; padding: 12px 18px;
            background: #ffffff; border: 1px solid #eeeeee; margin-bottom: 8px;
            border-radius: 4px; box-shadow: 0 3px 8px rgba(0,0,0,0.03);
            border-left: 4px solid #f0f0f0; animation: fadeInUp 0.4s ease-out;
        }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .state-correct { border-color: var(--success) !important; background-color: var(--success-bg) !important; color: var(--success) !important; }
        .state-error { border-color: var(--error) !important; background-color: var(--error-bg) !important; color: var(--error) !important; }

        .btn-check-final {
            margin: 20px auto 10px auto; background: var(--gold-accent); color: #fff;
            border: none; padding: 15px 60px; font-size: 18px; font-weight: 700;
            text-transform: uppercase; border-radius: 4px; cursor: pointer;
            display: none; box-shadow: 0 10px 25px rgba(188, 147, 47, 0.3);
        }

        #final-report { text-align: center; font-size: 22px; font-weight: 700; min-height: 30px; }
    </style>
</head>
<body>

<div id="ultra-wide-designer">
    <div id="modal-overlay">
        <div class="start-popup">
            <h3 style="font-family: 'Playfair Display', serif; font-size: 24px; color: var(--gold-accent); margin-bottom: 10px;">ГОТОВЫ СФОРМИРОВАТЬ ОСНОВУ ВАШЕГО БУДУЩЕГО ППР?</h3>
            <p style="font-size: 16px; color: #666; line-height: 1.5;">Определите, какие документы вам в этом помогут.</p>
            <button class="start-btn" onclick="closeModal()">Начать упражнение</button>
        </div>
    </div>

    </header>

    <div class="grid-workspace">
        <div class="category-bucket" id="box-yes" ondragover="handleOver(event)" ondragleave="handleLeave(event)" ondrop="handleDrop(event, true)">
            <div class="header-group">
                <svg viewBox="0 0 24 24"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"/></svg>
                <span>ПОМОГУТ</span>
            </div>
            <div id="container-yes" style="width:100%; display:flex; flex-direction:column; align-items:center;"></div>
        </div>

        <div class="overlay-anchor" id="card-holder"></div>

        <div class="category-bucket" id="box-no" ondragover="handleOver(event)" ondragleave="handleLeave(event)" ondrop="handleDrop(event, false)">
            <div class="header-group">
                <svg viewBox="0 0 24 24"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"/></svg>
                <span>НЕ ПОМОГУТ</span>
            </div>
            <div id="container-no" style="width:100%; display:flex; flex-direction:column; align-items:center;"></div>
        </div>
    </div>

    <button id="final-btn-check" class="btn-check-final" onclick="audit()">Проверить</button>
    <div id="final-report"></div>
</div>

<script>
    const dataset = [
        { t: "СП 48.13330.2019 «Организация строительства»", v: true },
        { t: "Проектная документация без штампа 'В производство работ'", v: false },
        { t: "СП 127.13330.2016 «Безопасность труда в строительстве»", v: true },
        { t: "Согласованная проектная документация", v: true },
        { t: "Проект технического задания (черновик)", v: false },
        { t: "Проект организации строительства (ПОС)", v: true },
        { t: "Техническое задание (ТЗ)", v: true },
        { t: "Устаревшие СНиПы (недействующие)", v: false },
        { t: "Топографический план объекта", v: true },
        { t: "Данные о ресурсах и технике подрядчика", v: true },
        { t: "Анализ рынка недвижимости региона", v: false }
    ];

    let step = 0;

    function closeModal() {
        document.getElementById('modal-overlay').classList.add('hidden');
        setTimeout(next, 400);
    }

    function next() {
        const h = document.getElementById('card-holder');
        h.innerHTML = '';
        if (step < dataset.length) {
            const c = document.createElement('div');
            c.className = 'popping-card';
            c.draggable = true;
            c.innerText = dataset[step].t;
            c.ondragstart = (e) => { e.dataTransfer.setData("text", "go"); };
            h.appendChild(c);
        } else {
            document.getElementById('final-btn-check').style.display = 'block';
        }
    }

    function handleOver(e) { e.preventDefault(); e.currentTarget.classList.add('drag-over'); }
    function handleLeave(e) { e.currentTarget.classList.remove('drag-over'); }

    function handleDrop(e, isPos) {
        e.preventDefault();
        e.currentTarget.classList.remove('drag-over');
        const target = document.getElementById(isPos ? 'container-yes' : 'container-no');
        const it = document.createElement('div');
        it.className = 'accumulated-item';
        it.innerText = dataset[step].t;
        it.dataset.isCorrect = dataset[step].v;
        it.dataset.userChoice = isPos;
        target.appendChild(it);
        step++;
        setTimeout(next, 200);
    }

    function audit() {
        const items = document.querySelectorAll('.accumulated-item');
        let err = 0;
        items.forEach(i => {
            const corr = (i.dataset.isCorrect === "true" && i.dataset.userChoice === "true") || (i.dataset.isCorrect === "false" && i.dataset.userChoice === "false");
            i.classList.add(corr ? 'state-correct' : 'state-error');
            if(!corr) err++;
        });
        const rep = document.getElementById('final-report');
        rep.innerHTML = err === 0 ? "✅ ВСЕ ВЕРНО!" : `⚠️ НАЙДЕНО ОШИБОК: ${err}. Попробуйте еще раз`;
        rep.style.color = err === 0 ? "var(--success)" : "var(--error)";
        const b = document.getElementById('final-btn-check');
        b.innerText = "Сбросить";
        b.onclick = () => location.reload();
    }
</script>

</body>
</html>