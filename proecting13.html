<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Упражнение: ОСУП и ДСУП</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --beige-bg: #f5f2eb;
            --gold-accent: #b8965a;
            --deep-gray: #333333;
            --border-color: #d1c7b7;
        }

        body {
            background-color: var(--beige-bg);
            font-family: 'Montserrat', sans-serif;
            color: var(--deep-gray);
            line-height: 1.6;
        }

        .header-font { font-family: 'Playfair Display', serif; font-style: normal; }

        /* Заменили height на min-height, чтобы контейнер мог расти под контент */
        .workspace {
            min-height: 450px;
        }

        .drag-item {
            cursor: grab;
            background: #ffffff;
            border: 1px solid var(--border-color);
            transition: all 0.2s ease;
            user-select: none;
            position: relative;
            z-index: 10;
        }

        .drag-item:hover {
            border-color: var(--gold-accent);
            box-shadow: 0 2px 8px rgba(184, 150, 90, 0.2);
        }

        .drop-zone, .pool-scroll {
            min-height: 200px; /* Минимальная высота для пустых зон */
            height: 100%;
            background-color: rgba(209, 199, 183, 0.2);
            border: 1px solid var(--gold-accent);
            padding: 1rem;
        }

        /* Тонкий стилизованный скроллбар */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--gold-accent); }

        .correct { border: 2px solid #4a7c59 !important; background-color: #f0f4f0 !important; }
        .incorrect { border: 2px solid #a64d4d !important; background-color: #f4f0f0 !important; }

        .btn-check {
            background-color: var(--deep-gray);
            color: var(--beige-bg);
            letter-spacing: 2px;
            text-transform: uppercase;
            font-size: 0.8rem;
            font-weight: 600;
            transition: 0.3s;
            z-index: 20;
            position: relative;
        }

        .btn-check:hover { background-color: var(--gold-accent); }

        * { font-style: normal !important; }
    </style>
</head>
<body class="p-4 lg:p-8">

    <div class="max-w-7xl mx-auto">
        <div class="text-center mb-8">
            <h1 class="header-font text-3xl text-gray-800 mb-2">Разделите приведенные ниже элементы на две колонки:</h1>
            <div class="h-0.5 w-20 bg-gold-accent mx-auto"></div>
        </div>

        <div class="flex flex-col lg:flex-row gap-6 workspace">
            
            <div class="w-full lg:w-1/3 flex flex-col">
                <h3 class="font-semibold mb-4 text-sm uppercase tracking-wider text-gold-accent">Список элементов:</h3>
                <div id="pool" class="pool-scroll space-y-3 flex-1 rounded-sm">
                    <div draggable="true" id="e1" data-ans="osup" class="drag-item p-4 text-sm">Стальная труба холодного водоснабжения, входящая в здание с улицы.</div>
                    <div draggable="true" id="e2" data-ans="dsup" class="drag-item p-4 text-sm">Заземляющий контакт (PE) розетки для стиральной машины в ванной.</div>
                    <div draggable="true" id="e3" data-ans="dsup" class="drag-item p-4 text-sm">Металлический корпус встроенной душевой кабины.</div>
                    <div draggable="true" id="e4" data-ans="osup" class="drag-item p-4 text-sm">Главный защитный (PE) проводник, приходящий от питающей линии.</div>
                    <div draggable="true" id="e5" data-ans="osup" class="drag-item p-4 text-sm">Арматура железобетонного фундамента здания.</div>
                    <div draggable="true" id="e6" data-ans="dsup" class="drag-item p-4 text-sm">Металлическая труба отопления (полотенцесушитель) в ванной комнате.</div>
                    <div draggable="true" id="e7" data-ans="osup" class="drag-item p-4 text-sm">Стальной каркас подвесного потолка в коридоре.</div>
                </div>
            </div>

            <div class="w-full lg:w-2/3 grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col">
                    <h3 class="font-semibold mb-4 text-sm uppercase tracking-wider text-center">Относится к ОСУП</h3>
                    <div id="osup" class="drop-zone flex flex-col gap-3 rounded-sm"></div>
                </div>
                <div class="flex flex-col">
                    <h3 class="font-semibold mb-4 text-sm uppercase tracking-wider text-center">Относится к ДСУП в ванной</h3>
                    <div id="dsup" class="drop-zone flex flex-col gap-3 rounded-sm"></div>
                </div>
            </div>
        </div>

        <div class="mt-16 text-center pb-8">
            <button onclick="validate()" class="btn-check px-12 py-4 shadow-md">Проверить решение</button>
            <div class="mt-4">
                <button onclick="location.reload()" class="text-[10px] uppercase tracking-widest text-gray-400 hover:text-gold-accent transition">Сбросить всё</button>
            </div>
        </div>

        <div id="rationale" class="mt-8 hidden max-w-5xl mx-auto p-8 bg-white border border-gold-accent shadow-sm mb-12">
            <h4 class="header-font text-2xl mb-4 text-gray-800">Обоснование:</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm leading-relaxed text-gray-700">
                <p><strong>Элементы 1, 4, 5, 7</strong> — это общестроительные и вводные элементы, объединяемые в <strong>Основной системе (ОСУП)</strong> на уровне всего здания.</p>
                <p><strong>Элементы 2, 3, 6</strong> — это локальные части внутри ванной комнаты, подключаемые в рамках <strong>Дополнительной системы (ДСУП)</strong>.</p>
            </div>
        </div>
    </div>

    <script>
        const items = document.querySelectorAll('.drag-item');
        const zones = document.querySelectorAll('.drop-zone, #pool');

        items.forEach(item => {
            item.addEventListener('dragstart', e => e.dataTransfer.setData('text', e.target.id));
        });

        zones.forEach(zone => {
            zone.addEventListener('dragover', e => e.preventDefault());
            zone.addEventListener('drop', e => {
                e.preventDefault();
                const id = e.dataTransfer.getData('text');
                const element = document.getElementById(id);
                if (element) zone.appendChild(element);
            });
        });

        function validate() {
            const placedItems = document.querySelectorAll('.drop-zone .drag-item');
            placedItems.forEach(item => {
                const parentId = item.parentElement.id;
                if (item.dataset.ans === parentId) {
                    item.classList.add('correct');
                    item.classList.remove('incorrect');
                } else {
                    item.classList.add('incorrect');
                    item.classList.remove('correct');
                }
            });
            document.getElementById('rationale').classList.remove('hidden');
            // Плавный скролл к обоснованию
            document.getElementById('rationale').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>